(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{414:function(e,t,n){e.exports=n(736)},419:function(e,t,n){},736:function(e,t,n){"use strict";n.r(t);var a,r=n(1),o=n.n(r),c=n(44),i=n.n(c),s=(n(419),n(758)),u=n(762),l=n(759),d=n(760),m=n(217),f=n(382),p=n(153),h=n(753),w=n(756),g=n(755),v=n(757),E=n(259),b=n.n(E),k=n(338),j=n(423),y=n(58),P=n(13),S=(a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.a.fetchJson,n=function(e){var t=e.pagination,n=t.page,a=t.perPage,r=e.sort,o=r.field,c=r.order;return o&&(e.filter.$sort=("DESC"===c?"-":"")+o),null!=e.filter.q&&(e.filter.$term=e.filter.q,delete e.filter.q),Object.assign(j.a.flattenObject(e.filter),{$limit:a,$page:n},o?{$sort:("DESC"===c?"-":"")+("id"===o?"_id":o)}:{})},a=function(e){var t=Object.assign({},e.data);return delete t.id,delete t.createdAt,delete t.updatedAt,delete t.deletedAt,delete t.isDeleted,JSON.stringify(t)};return function(r,o,c){if(r===P.i)return Promise.all(c.ids.map(function(n){return t("".concat(e,"/").concat(o,"/").concat(n),{method:"PATCH",body:JSON.stringify(c.data)})})).then(function(e){return{data:e.map(function(e){return e.json})}});if(r===P.c)return Promise.all(c.ids.map(function(n){return t("".concat(e,"/").concat(o,"/").concat(n),{method:"DELETE"})})).then(function(e){return{data:e.map(function(e){return e.json})}});var i=function(t,r,o){var c="",i={};switch(t){case P.d:var s=n(o);c="".concat(e,"/").concat(r,"?").concat(Object(y.stringify)(s));break;case P.g:c="".concat(e,"/").concat(r,"/").concat(o.id);break;case P.f:var u=n(o);u[o.target]=o.id,c="".concat(e,"/").concat(r,"?").concat(Object(y.stringify)(u));break;case P.h:c="".concat(e,"/").concat(r,"/").concat(o.id),i.method="PUT",i.body=a(o);break;case P.a:c="".concat(e,"/").concat(r),i.method="POST",i.body=a(o);break;case P.b:c="".concat(e,"/").concat(r,"/").concat(o.id),i.method="DELETE";break;case P.e:c="".concat(e,"/").concat(r,"?").concat(o.ids.map(function(e){return Object(y.stringify)({_id:e})}).join("&"));break;default:throw new Error("Unsupported fetch action type ".concat(t))}return{url:c,options:i}}(r,o,c),s=i.url,u=i.options;return t(s,u).then(function(e){return function(e,t,n,a){console.log(t,n,a);var r=e.json;switch(t){case P.d:case P.e:case P.f:return{data:r.docs.map(function(e){return(e.id=e._id)&&delete e._id&&e}),total:r.items.total};case P.a:return a.data.id=a.data._id,delete a.data._id,{data:a.data};case P.b:return{data:a};default:return r?(r.id=r._id,delete r._id,{data:r}):{data:{}}}}(e,r,o,c)})}}("/api",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers=new Headers({Accept:"application/json"}));var n=localStorage.getItem("token");return t.headers.set("authorization","".concat(n)),j.a.fetchJson(e,t)}),function(){var e=Object(k.a)(b.a.mark(function e(t,n,r){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n,r),e.abrupt("return",a(t,n,r));case 2:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}()),O=n(187),T=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/api",_=function(e,t){if(e===O.d){var n=t.username,a=t.password,r=new Request(T+"/login",{method:"POST",body:JSON.stringify({username:n,password:a}),headers:new Headers({"Content-Type":"application/json"})});return fetch(r).then(function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()}).then(function(e){var t=e.token;localStorage.setItem("token",t)})}if(e===O.e)return localStorage.removeItem("token"),Promise.resolve();if(e===O.b){var o=t.status;return 401===o||403===o?(localStorage.removeItem("token"),Promise.reject()):Promise.resolve()}return e===O.a?(console.log("auth check",localStorage.getItem("token")),localStorage.getItem("token")?Promise.resolve():Promise.reject()):Promise.reject("Unknown method")},I=o.a.createElement(s.a,null,o.a.createElement(u.a,{source:"name"}),o.a.createElement(u.a,{multiline:!0,source:"initScript"}),o.a.createElement(u.a,{multiline:!0,source:"responseScript"})),J=function(e){return o.a.createElement(l.a,e,I)},$=function(e){return o.a.createElement(d.a,e,I)},x=function(e){return o.a.createElement(m.b,e,o.a.createElement(f.a,{rowClick:"edit"},o.a.createElement(p.a,{source:"name"})))},A=o.a.createElement(s.a,null,o.a.createElement(u.a,{source:"key"}),o.a.createElement(h.a,{source:"type",choices:[{id:"text",name:"Text"},{id:"number",name:"Number"}]}),o.a.createElement(u.a,{source:"value"})),C=function(e){return o.a.createElement(l.a,e,A)},D=function(e){return o.a.createElement(d.a,e,A)},N=function(){return o.a.createElement(w.a,{dataProvider:S,authProvider:_},o.a.createElement(g.a,{name:"scriptNode",list:x,edit:J,create:$}),o.a.createElement(g.a,{name:"config",list:v.a,edit:C,create:D}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[414,1,2]]]);
//# sourceMappingURL=main.ea4cdacd.chunk.js.map