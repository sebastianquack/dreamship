(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{448:function(e,t,a){e.exports=a(774)},453:function(e,t,a){},774:function(e,t,a){"use strict";a.r(t);var n,r=a(1),o=a.n(r),c=a(43),i=a.n(c),l=(a(453),a(413)),s=a(150),u=a(282),d=a(237),m=a(797),f=a(236),p=a(414),E=a(171),h=a(415),b=a(792),w=a(791),g=a(793),v=a(794),y=a(279),k=a.n(y),P=a(364),j=a(457),S=a(62),O=a(14),T=(n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.a.fetchJson,a=function(e){var t=e.pagination,a=t.page,n=t.perPage,r=e.sort,o=r.field,c=r.order;return o&&(e.filter.$sort=("DESC"===c?"-":"")+o),null!=e.filter.q&&(e.filter.$term=e.filter.q,delete e.filter.q),Object.assign(j.a.flattenObject(e.filter),{$limit:n,$page:a},o?{$sort:("DESC"===c?"-":"")+("id"===o?"_id":o)}:{})},n=function(e){var t=Object.assign({},e.data);return delete t.id,delete t.createdAt,delete t.updatedAt,delete t.deletedAt,delete t.isDeleted,JSON.stringify(t)};return function(r,o,c){if(r===O.i)return Promise.all(c.ids.map(function(a){return t("".concat(e,"/").concat(o,"/").concat(a),{method:"PATCH",body:JSON.stringify(c.data)})})).then(function(e){return{data:e.map(function(e){return e.json})}});if(r===O.c)return Promise.all(c.ids.map(function(a){return t("".concat(e,"/").concat(o,"/").concat(a),{method:"DELETE"})})).then(function(e){return{data:e.map(function(e){return e.json})}});var i=function(t,r,o){var c="",i={};switch(t){case O.d:var l=a(o);c="".concat(e,"/").concat(r,"?").concat(Object(S.stringify)(l));break;case O.g:c="".concat(e,"/").concat(r,"/").concat(o.id);break;case O.f:var s=a(o);s[o.target]=o.id,c="".concat(e,"/").concat(r,"?").concat(Object(S.stringify)(s));break;case O.h:c="".concat(e,"/").concat(r,"/").concat(o.id),i.method="PUT",i.body=n(o);break;case O.a:c="".concat(e,"/").concat(r),i.method="POST",i.body=n(o);break;case O.b:c="".concat(e,"/").concat(r,"/").concat(o.id),i.method="DELETE";break;case O.e:c="".concat(e,"/").concat(r,"?").concat(o.ids.map(function(e){return Object(S.stringify)({_id:e})}).join("&"));break;default:throw new Error("Unsupported fetch action type ".concat(t))}return{url:c,options:i}}(r,o,c),l=i.url,s=i.options;return t(l,s).then(function(e){return function(e,t,a,n){console.log(t,a,n);var r=e.json;switch(t){case O.d:case O.e:case O.f:return{data:r.docs.map(function(e){return(e.id=e._id)&&delete e._id&&e}),total:r.items.total};case O.a:return n.data.id=n.data._id,delete n.data._id,{data:n.data};case O.b:return{data:n};default:return r?(r.id=r._id,delete r._id,{data:r}):{data:{}}}}(e,r,o,c)})}}("/api",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers=new Headers({Accept:"application/json"}));var a=localStorage.getItem("token");return t.headers.set("authorization","".concat(a)),j.a.fetchJson(e,t)}),function(){var e=Object(P.a)(k.a.mark(function e(t,a,r){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,a,r),e.abrupt("return",n(t,a,r));case 2:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}()),x=a(204),N=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/api",_=function(e,t){if(e===x.d){var a=t.username,n=t.password,r=new Request(N+"/login",{method:"POST",body:JSON.stringify({username:a,password:n}),headers:new Headers({"Content-Type":"application/json"})});return fetch(r).then(function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()}).then(function(e){var t=e.token;localStorage.setItem("token",t)})}if(e===x.e)return localStorage.removeItem("token"),Promise.resolve();if(e===x.b){var o=t.status;return 401===o||403===o?(localStorage.removeItem("token"),Promise.reject()):Promise.resolve()}return e===x.a?(console.log("auth check",localStorage.getItem("token")),localStorage.getItem("token")?Promise.resolve():Promise.reject()):Promise.reject("Unknown method")},I=o.a.createElement(l.a,null,o.a.createElement(s.a,{source:"key"}),o.a.createElement(u.a,{source:"type",choices:[{id:"text",name:"Text"},{id:"number",name:"Number"}]}),o.a.createElement(s.a,{source:"value"})),J=function(e){return o.a.createElement(d.b,e,I)},$=function(e){return o.a.createElement(m.a,e,I)},A=o.a.createElement(l.a,null,o.a.createElement(s.a,{source:"name"}),o.a.createElement(s.a,{multiline:!0,source:"script"})),C=function(e){return o.a.createElement(d.b,e,A)},D=function(e){return o.a.createElement(m.a,e,A)},q=function(e){return o.a.createElement(f.b,e,o.a.createElement(p.a,{rowClick:"edit"},o.a.createElement(E.a,{source:"name"})))},H=o.a.createElement(l.a,null),U=function(e){return o.a.createElement(d.b,e,H)},B=function(e){return o.a.createElement(m.a,e,H)},L=o.a.createElement(l.a,null,o.a.createElement(s.a,{source:"key"}),o.a.createElement(s.a,{source:"value"}),o.a.createElement(u.a,{source:"varScope",choices:[{id:"player",name:"player"},{id:"playerNode",name:"playerNode"},{id:"node",name:"node"},{id:"board",name:"board"}]}),o.a.createElement(h.a,{label:"player",source:"player",reference:"player",perPage:200,allowEmpty:!0},o.a.createElement(u.a,{optionText:"id"})),o.a.createElement(h.a,{label:"node",source:"script",reference:"scriptNode",perPage:200,allowEmpty:!0},o.a.createElement(u.a,{optionText:"name"})),o.a.createElement(h.a,{label:"board",source:"board",reference:"board",perPage:200,allowEmpty:!0},o.a.createElement(u.a,{optionText:"name"}))),W=function(e){return o.a.createElement(d.b,e,L)},z=function(e){return o.a.createElement(m.a,e,L)},R=function(){return o.a.createElement(b.a,{dataProvider:T,authProvider:_},o.a.createElement(w.a,{name:"config",list:g.a,edit:J,create:$}),o.a.createElement(w.a,{name:"board",list:g.a,edit:v.a}),o.a.createElement(w.a,{name:"scriptNode",list:q,edit:C,create:D}),o.a.createElement(w.a,{name:"player",list:g.a,edit:U,create:B}),o.a.createElement(w.a,{name:"variable",list:g.a,edit:W,create:z}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[448,1,2]]]);
//# sourceMappingURL=main.72f18edb.chunk.js.map