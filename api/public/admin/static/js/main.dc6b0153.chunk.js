(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{402:function(e,t,n){e.exports=n(718)},407:function(e,t,n){},718:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(38),i=n.n(c),s=(n(407),n(737)),d=n(738),u=n(740),l=n(743),f=n(736),m=n(739),p=n(741),h=n(735),w=n(734),g=n(250),v=n.n(g),b=n(329),E=n(728),k=n(55),j=n(13),y=(a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.a.fetchJson,n=function(e){var t=e.pagination,n=t.page,a=t.perPage,r=e.sort,o=r.field,c=r.order;return o&&(e.filter.$sort=("DESC"===c?"-":"")+o),null!=e.filter.q&&(e.filter.$term=e.filter.q,delete e.filter.q),Object.assign(E.a.flattenObject(e.filter),{$limit:a,$page:n},o?{$sort:("DESC"===c?"-":"")+("id"===o?"_id":o)}:{})},a=function(e){var t=Object.assign({},e.data);return delete t.id,delete t.createdAt,delete t.updatedAt,delete t.deletedAt,delete t.isDeleted,JSON.stringify(t)};return function(r,o,c){if(r===j.i)return Promise.all(c.ids.map(function(n){return t("".concat(e,"/").concat(o,"/").concat(n),{method:"PATCH",body:JSON.stringify(c.data)})})).then(function(e){return{data:e.map(function(e){return e.json})}});if(r===j.c)return Promise.all(c.ids.map(function(n){return t("".concat(e,"/").concat(o,"/").concat(n),{method:"DELETE"})})).then(function(e){return{data:e.map(function(e){return e.json})}});var i=function(t,r,o){var c="",i={};switch(t){case j.d:var s=n(o);c="".concat(e,"/").concat(r,"?").concat(Object(k.stringify)(s));break;case j.g:c="".concat(e,"/").concat(r,"/").concat(o.id);break;case j.f:var d=n(o);d[o.target]=o.id,c="".concat(e,"/").concat(r,"?").concat(Object(k.stringify)(d));break;case j.h:c="".concat(e,"/").concat(r,"/").concat(o.id),i.method="PUT",i.body=a(o);break;case j.a:c="".concat(e,"/").concat(r),i.method="POST",i.body=a(o);break;case j.b:c="".concat(e,"/").concat(r,"/").concat(o.id),i.method="DELETE";break;case j.e:c="".concat(e,"/").concat(r,"?").concat(o.ids.map(function(e){return Object(k.stringify)({_id:e})}).join("&"));break;default:throw new Error("Unsupported fetch action type ".concat(t))}return{url:c,options:i}}(r,o,c),s=i.url,d=i.options;return t(s,d).then(function(e){return function(e,t,n,a){console.log(t,n,a);var r=e.json;switch(t){case j.d:case j.e:case j.f:return{data:r.docs.map(function(e){return(e.id=e._id)&&delete e._id&&e}),total:r.items.total};case j.a:return a.data.id=a.data._id,delete a.data._id,{data:a.data};case j.b:return{data:a};default:return r?(r.id=r._id,delete r._id,{data:r}):{data:{}}}}(e,r,o,c)})}}("/api",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers=new Headers({Accept:"application/json"}));var n=localStorage.getItem("token");return t.headers.set("authorization","".concat(n)),E.a.fetchJson(e,t)}),function(){var e=Object(b.a)(v.a.mark(function e(t,n,r){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n,r),e.abrupt("return",a(t,n,r));case 2:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}()),P=n(182),S=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/api",O=function(e,t){if(e===P.d){var n=t.username,a=t.password,r=new Request(S+"/login",{method:"POST",body:JSON.stringify({username:n,password:a}),headers:new Headers({"Content-Type":"application/json"})});return fetch(r).then(function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()}).then(function(e){var t=e.token;localStorage.setItem("token",t)})}if(e===P.e)return localStorage.removeItem("token"),Promise.resolve();if(e===P.b){var o=t.status;return 401===o||403===o?(localStorage.removeItem("token"),Promise.reject()):Promise.resolve()}return e===P.a?(console.log("auth check",localStorage.getItem("token")),localStorage.getItem("token")?Promise.resolve():Promise.reject()):Promise.reject("Unknown method")},T=o.a.createElement(s.a,null,o.a.createElement(d.a,{source:"name"}),o.a.createElement(d.a,{multiline:!0,source:"initScript"}),o.a.createElement(d.a,{multiline:!0,source:"responseScript"})),_=function(e){return o.a.createElement(u.a,e,T)},I=function(e){return o.a.createElement(l.a,e,T)},J=function(e){return o.a.createElement(f.a,e,o.a.createElement(m.a,{rowClick:"edit"},o.a.createElement(p.a,{source:"name"})))},$=function(){return o.a.createElement(h.a,{dataProvider:y,authProvider:O},o.a.createElement(w.a,{name:"scriptNode",list:J,edit:_,create:I}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[402,1,2]]]);
//# sourceMappingURL=main.dc6b0153.chunk.js.map